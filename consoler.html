<!doctype html>
<html>
<head>
<style>
body {
	margin: 0;
	font-family: monospace;
	font-size: 14px;
	color: #dcdcdc;
	background-color: #240029;
}
#out {
}
#controls {
	background-color: black;
	border-bottom: 1px gray solid;
	height: 20px;
}
</style>
<script>
window.onload = function() {
var connectionStateEl = document.getElementById('connectionState');
var es = new EventSource('/events');
es.addEventListener('message', function(event) {
	console.log(event.data)
	var divEl = document.createElement('div');
	var line = event.data.substr(1)// Remove ^ char at the beginning
	divEl.innerText = line;
	var stdoutEl = document.getElementById('out');
	stdoutEl.appendChild(divEl)
}, false);

es.addEventListener('open', function() {
	connectionStateEl.innerText = 'Listening';
}, false);

es.addEventListener('error', function(e) {
	connectionStateEl.innerText = 'Connection lost';
  if (e.readyState == EventSource.CLOSED) {
    // Connection was closed.
  }
}, false);
};
</script>
</head>
<body>
<div id="controls">
	<div id="connectionState"></div>
</div>
<div id="out"></div>
</body>
</html>
